!function(e){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e,s){"use strict";if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var i=Object(e),a=1;a<arguments.length;a++){var t=arguments[a];if(void 0!==t&&null!==t)for(var l=Object.keys(Object(t)),o=0,c=l.length;c>o;o++){var n=l[o],r=Object.getOwnPropertyDescriptor(t,n);void 0!==r&&r.enumerable&&(i[n]=t[n])}}return i}});var s=$(".musicMedia-wrap");s.html('<div class="musicMedia-player"><div class="musicMedia-player-header-options clear-select"><i class="musicMedia-player-header-option musicMedia-player-header-logo"></i><span class="musicMedia-player-header-title text-ellipsis"></span><span class="musicMedia-player-header-singer text-ellipsis"></span><button class="musicMedia-player-header-option musicMedia-player-min" title="最小化"></button><button class="musicMedia-player-header-option musicMedia-player-close" title="关闭"></button></div><audio></audio><figure class="musicMedia-player-album-bg"><div class="musicMedia-player-controls"><div class="musicMedia-player-process-wrap"><div class="process-part process-left"><div class="c-process c-process-left"></div></div><div class="process-part process-right"><div class="c-process c-process-right"></div></div></div><button class="major-btn"><i class="pause none"></i><i class="play"></i></button></div><img alt="alumn"><div class="musicMedia-player-album-span"></div><div class="musicMedia-player-album-disc stop"><img alt="alumn"></div></figure><div class="musicMedia-player-info"><button class="music-control prev-muisc" title="上一首"></button><button class="music-control next-muisc" title="下一首"></button><div class="music-album-name"><span class="text-ellipsis"></span></div><div class="music-favorite-name"><span class="text-ellipsis"></span></div><div class="music-time"><span class="now-time">00:00</span>/<span class="all-time">00:00</span></div></div><div class="musicMedia-player-footer-options"><div class="musicMedia-player-vol"><div class="musicMedia-player-vol-process" title="声音"><div class="musicMedia-player-vol-process-anchor" title="声音"></div></div></div><button class="musicMedia-player-muisc-menu" title="歌曲列表"></button><button class="play-mode-list random-play" title="随机播放"></button></div></div><figure class="music-media-bg"><img alt="bg"></figure><div class="musicMedia-player-list-wrap clear-select n-h"><section class="musicMedia-player-list-box"><ul class="musicMedia-player-list clearfix"><li class="favorite-list"></li><li class="music-list"></li></ul></section><div class="musicMedia-player-list-bg"></div></div><div class="musicMedia-player-minimize clear-select minimize-hidden"><i></i><span>音乐歌单</span></div>');var i=$(".major-btn"),a=$(".major-btn .pause"),t=$(".major-btn .play"),l=$(".musicMedia-player-album-disc"),o=$(".play-mode-list"),c=2,n=$(".prev-muisc"),r=$(".next-muisc"),u=$(".musicMedia-player-close"),d=$(".musicMedia-wrap audio")[0],m=$(".c-process-left"),p=$(".c-process-right"),v=null,f=0,h=$(".musicMedia-player-header-singer"),g=$(".music-album-name span"),b=$(".musicMedia-player-header-title"),y=$(".music-favorite-name span"),M=$(".now-time"),w=$(".all-time"),C=$(".musicMedia-player-vol-process-anchor"),L=$(".musicMedia-player-vol-process"),x=$(".musicMedia-player-muisc-menu"),k=$(".musicMedia-player-list-wrap"),T=$(".musicMedia-player-list-box"),N=($(".musicMedia-player-list-bg"),$(".musicMedia-player-list")),j=($(".domain-title"),$(".favorite-list")),O=$(".music-list"),q=!1,D=$(".musicMedia-player-album-bg img"),H=$(".musicMedia-player-album-disc img"),A=$(".music-media-bg img"),E=$(".musicMedia-player-header-options"),X=$(".musicMedia-wrap"),z=X.outerWidth(),B=X.outerHeight(),Y=T.height(),I=$(".musicMedia-player-min"),S=$(".musicMedia-player-minimize");$.fn.musicMedia=function(e,s){function T(e){d.src=re[e].url,d.onloadedmetadata=function(){g.html(re[oe].AlbumName),b.html(re[oe].title),h.html(re[oe].singer),w.html(V(d.duration)),y.html(ne[le].favoriteName),D[0].src=re[oe].AlbumBg,H[0].src=re[oe].AlbumBg,A[0].src=re[oe].AlbumBg}}function F(){a.removeClass("none"),t.addClass("none"),l.removeClass("stop"),l.addClass("move"),setTimeout(function(){d.play(),Q()},800)}function P(){a.addClass("none"),t.removeClass("none"),l.removeClass("move"),l.addClass("stop"),d.pause()}function Q(){switch(f=(d.currentTime/d.duration).toFixed(3),M.html(V(d.currentTime)),!0){case.5>=f:p.css("transform","rotate("+(-135+360*f)+"deg)"),v=setTimeout(Q,1e3);break;case f>.5&&1>f:p.css("transform","rotate(45deg)"),m.css("transform","rotate("+(-135+360*f-180)+"deg)"),v=setTimeout(Q,1e3);break;case f>=1:m.css("transform","rotate(45deg)"),W()}}function W(){clearTimeout(v),P(),Z()}function R(){p.css("transform","rotate(-135deg)"),m.css("transform","rotate(-135deg)")}function Z(){switch(R(),MusicListoLis.eq(oe).removeClass("active"),c){case 1:break;case 2:if(1===re.length)break;var e=~~(te()*re.length-1);e>oe-1&&++e,oe=e,T(oe);break;case 3:G()}MusicListoLis.eq(oe).addClass("active"),F()}function _(){MusicListoLis.eq(oe).removeClass("active"),0===oe?(oe=re.length-1,T(oe)):T(--oe),MusicListoLis.eq(oe).addClass("active")}function G(){MusicListoLis.eq(oe).removeClass("active"),oe===re.length-1?(oe=0,T(oe)):T(++oe),MusicListoLis.eq(oe).addClass("active")}function J(e){le=e,re=ne[le].musicList}function K(){var e="";e+='<h2 class="musicMedia-player-list-title"><span class="domain-title text-ellipsis">'+ee.domainName+'</span><span class="lists-name"> - 专辑列表 ('+ne.length+')</span></h2><div class="scroll-box"><ol class="clearfix">',ne.forEach(function(s,i,a){e+=0===i?'<li class="active">':"<li>",e+="<button data-favorite-index="+i+' ><span class="favorite-name">'+s.favoriteName+"</span></button></li>"}),e+='</ol></div><div class="scroll-bar-box"><div class="scroll-bar"></div></div>',j.html(e)}function U(){var e="";e+='<h2 class="musicMedia-player-list-title"><i class="back-arrow"></i><span class="favorite-title text-ellipsis">'+ne[ce].favoriteName+'</span></h2><div class="scroll-box"><ol class="clearfix">',ne[ce].musicList.forEach(function(s,i,a){e+=le===ce&&oe===i?'<li class="active">':"<li>",e+="<button data-favorite-index="+ce+" data-music-index="+i+'><span class="muisc-name">'+s.title+'</span><span class="album-name">'+s.AlbumName+"</span></button></li>"}),e+='</ol></div><div class="scroll-bar-box"><div class="scroll-bar"></div></div>',O.html(e)}function V(e){function s(e){return 9>=e?"0"+e:""+e}e=~~e;var i=s(ae.floor(e%3600/60)),a=s(e%60);return i+":"+a}var ee={domainName:"未知站点的",defaultBg:"./img/dft-muisc-alumn-bg.jpg"},se={favoriteName:"音乐收藏夹",musicList:[]};Object.assign(ee,e);var ie={url:"",title:"",AlbumName:"",singer:"",AlbumBg:ee.defaultBg},ae=Math,te=ae.random,le=0,oe=0,ce=0;MusicListoLis=null;var ne=s.map(function(e,s,i){var a={};return Object.assign(a,se,e),a.musicList=a.musicList.map(function(e,s,i){var a={};return Object.assign(a,ie,e),a}),a}),re=ne[le].musicList;T(oe),K();var ue=$(".favorite-list ol li"),de=$(".musicMedia-player-list-title");U(),MusicListoLis=$(".music-list ol li"),ee.autoHidden&&(X.css("left",-z),S.removeClass("minimize-hidden")),ee.autoplay&&F(),x.on("click",function(){if(q)ue.each(function(e,s){$(s).removeClass("move-left")}),setTimeout(function(){$(de).removeClass("move-left"),setTimeout(function(){k.addClass("n-h"),q=!1},200)},100);else{var e=X.offset().top,s=$(document).scrollTop();e>=innerHeight+s-(B+Y)&&(X.addClass("musicMedia-wrap-t-5"),setTimeout(function(){X.removeClass("musicMedia-wrap-t-5")},500),X.css("top",innerHeight+s-(B+Y))),k.removeClass("n-h"),$(de).addClass("move-left"),setTimeout(function(){ue.each(function(e,s){$(s).addClass("move-left")})},500),q=!0}}),i.on("click",function(){d.paused?F():P()}),o.on("click",function(){switch(!0){case o.hasClass("single-cycle"):o[0].className="play-mode-list",o.addClass("random-play"),o[0].title="随机播放",c=2;break;case o.hasClass("random-play"):o[0].className="play-mode-list",o.addClass("sequential-play"),o[0].title="顺序播放",c=3;break;case o.hasClass("sequential-play"):o[0].className="play-mode-list",o.addClass("single-cycle"),o[0].title="单曲循环",c=1}}),n.on("click",function(){P(),R(),_(),F()}),r.on("click",function(){P(),R(),G(),F()}),C.Drag(function(e){var s=(L.css("width"),e.left);s>118?s=118:4>=s&&(s=4),d.volume=((s-4)/114).toFixed(2),L.css("width",s)}),S.on("click",function(){X.addClass("musicMedia-wrap-t-5"),X.css("left",0),S.addClass("minimize-hidden"),setTimeout(function(){X.removeClass("musicMedia-wrap-t-5")},500)}),I.on("click",function(){X.addClass("musicMedia-wrap-t-5"),X.css("left",-z),S.removeClass("minimize-hidden"),setTimeout(function(){X.removeClass("musicMedia-wrap-t-5")},500)}),u.on("click",function(){X.remove()}),X.delegate("img","dragstart",function(){return!1}),j.Scroll(),E.Drag(function(e){var s=innerWidth,i=innerHeight,a=$(document).scrollLeft(),t=$(document).scrollTop(),l=e.kLeft,o=e.kTop,c=i+t-B,n=s+a-z;return q&&(c=i+t-(B+Y)),l>=n&&(l=n),a>=l&&(l=a),o>=c&&(o=c),t>=o&&(o=t),X.css("left",l),X.css("top",o),!1}),j.delegate("button","click",function(e){var s="span"===e.target.tagName.toLowerCase()?e.target.parentNode:e.target,i=~~s.dataset.favoriteIndex;ce=i,U(),O.Scroll(),N.addClass("move-right"),MusicListoLis=$(".music-list ol li")}),O.delegate("button","click",function(e){var s="span"===e.target.tagName.toLowerCase()?e.target.parentNode:e.target,i=~~s.dataset.musicIndex,a=~~s.dataset.favoriteIndex;MusicListoLis.eq(oe).removeClass("active"),oe=i,MusicListoLis.eq(oe).addClass("active"),ue.eq(le).removeClass("active"),ue.eq(a).addClass("active"),J(a),clearTimeout(v),P(),T(oe),F()}),O.delegate("h2","click",function(e){"span"===e.target.tagName.toLowerCase()?e.target.parentNode:e.target;N.removeClass("move-right")})},$.fn.Drag=function(e){var s=this;s.on("mousedown",function(i){var a=i.clientX-s.position().left,t=i.clientY-s.position().top,l=i.clientX-s.offset().left,o=i.clientY-s.offset().top,c=s.offset().left,n=s.offset().top;$(document).on("mousemove.drag",function(s){var i=s.clientY-t,r=s.clientX-a,u=s.clientY-o,d=s.clientX-l,m=c-r,p=n-i;e&&e({top:i,left:r,kTop:u,kLeft:d,cLeft:c,cTop:n,pLeft:r/c*100,pTop:i/n*100,dLeft:m,dTop:p})}),$(document).on("mouseup.drag",function(){$(document).off("mousemove.drag"),s.off("mouseup.drag")})})},$.fn.Scroll=function(e){var s=this.find("ol"),i=this.find(".scroll-bar-box"),a=i.find(".scroll-bar"),t=i.outerHeight(),l=s.outerHeight(),o=301,c=l-o,n=c*t/l,r=t-n;0===n?a.css("height",0):a.css("height",r),a.Drag(function(e){var i=e.top;i>n?i=n:0>=i&&(i=0),a.css("top",i),s.css("marginTop",-(i*c/n))}),this.on("mousewheel",function(e,i){var t=a.position().top,l=10,o=t+-i*l;return o>n?o=n:0>=o&&(o=0),a.css("top",o),s.css("marginTop",-(o*c/n)),!1})}}(jQuery),function(e){function s(s){var i=s||window.event,a=[].slice.call(arguments,1),t=0,l=0,o=0;return s=e.event.fix(i),s.type="mousewheel",i.wheelDelta&&(t=i.wheelDelta/120),i.detail&&(t=-i.detail/3),o=t,void 0!==i.axis&&i.axis===i.HORIZONTAL_AXIS&&(o=0,l=-1*t),void 0!==i.wheelDeltaY&&(o=i.wheelDeltaY/120),void 0!==i.wheelDeltaX&&(l=-1*i.wheelDeltaX/120),a.unshift(s,t,l,o),(e.event.dispatch||e.event.handle).apply(this,a)}var i=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var a=i.length;a;)e.event.fixHooks[i[--a]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=i.length;e;)this.addEventListener(i[--e],s,!1);else this.onmousewheel=s},teardown:function(){if(this.removeEventListener)for(var e=i.length;e;)this.removeEventListener(i[--e],s,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery);